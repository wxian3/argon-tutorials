<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Argonjs &middot; Tutorials
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-09">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>This site contains a collection of tutorials for web developers using <a href="http://argonjs.io" target="_blank">argon.js</a> to add AR content to a web application.</p>
  </div>

  <nav class="sidebar-nav">
    <li class="sidebar-nav-item"><a href="/tutorials/WelcomePage">Home</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Overview">Overview</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial1">Tutorial 1</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial2">Tutorial 2</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial3">Tutorial 3</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial4">Tutorial 4</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial5">Tutorial 5</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial6">Tutorial 6</a></li>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about">About</a>
        
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="/argon-tutorials.zip">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/argonjs/argon.js">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Argonjs</a>
            <small>Tutorials</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/tutorials/Tutorial2.html">
        Tutorial 2 - Compass
      </a>
    </h1>

    <span class="post-date">01 Mar 2016</span>

    <h3 id="before-you-start">Before you start</h3>
<p>Make sure you have completed <a href="/argon-tutorials/tutorial1">tutorial 1</a></p>

<h3 id="what-you-should-see">What you should see</h3>
<p>Download <a href="https://itunes.apple.com/us/app/argon3/id944297993?ls=1&amp;mt=8">Argon3</a> and <a href="/argon-tutorials/tutorial4">Try Now</a></p>

<p>As you move your camera around, you should see direction markers (north, east, south, west, up and down) positioned in space.</p>
<div class="video">
    <figure>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/utUDuncItCs" frameborder="0" allowfullscreen=""></iframe>
    </figure>
</div>

<h3 id="introduction">Introduction</h3>
<p>This example demonstrates how to position content in space relative to the camera, which the user can view around her when she loads the application into Argon3.</p>

<h3 id="main-file-indexhtml">Main file (index.html)</h3>
<p>In the index.html file, we explain what the example does in the body tag: this will appear when the user enters Page Mode.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">body</span> <span class="nx">style</span><span class="o">=</span><span class="s2">"background-color:rgba(255,255,255,0.7)"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Six</span> <span class="nx">directions</span> <span class="nx">example</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">example</span> <span class="nx">displays</span> <span class="nx">the</span> <span class="nx">reference</span> <span class="nx">frame</span> <span class="nx">around</span> <span class="nx">the</span> <span class="nx">camera</span> <span class="k">in</span> <span class="nx">Cartesian</span> <span class="nx">coordinates</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">).</span> <span class="nx">It</span> <span class="nx">puts</span> <span class="nx">a</span> <span class="nx">image</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">negative</span> <span class="nx">and</span> <span class="nx">positive</span> <span class="nx">directions</span><span class="err">:</span> <span class="nx">x</span> <span class="nx">is</span> <span class="nx">left</span><span class="o">/</span><span class="nx">right</span><span class="p">;</span> <span class="nx">y</span> <span class="nx">is</span> <span class="nx">up</span><span class="o">/</span><span class="nx">down</span><span class="p">;</span> <span class="nx">z</span> <span class="nx">is</span> <span class="nx">back</span><span class="o">/</span><span class="nx">front</span><span class="p">.</span> <span class="nx">A</span> <span class="nx">div</span> <span class="nx">is</span> <span class="nx">created</span> <span class="k">in</span> <span class="nx">each</span> <span class="nx">of</span> <span class="nx">these</span> <span class="nx">directions</span> <span class="nx">and</span> <span class="nx">converted</span> <span class="nx">to</span> <span class="nx">cssObject</span> <span class="p">(</span><span class="k">in</span> <span class="nx">three</span><span class="p">.</span><span class="nx">js</span><span class="p">)</span> <span class="nx">at</span>  <span class="mi">600</span> <span class="nx">units</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">origin</span><span class="p">.</span> <span class="nx">These</span> <span class="nx">cssObjects</span> <span class="nx">are</span> <span class="nx">then</span> <span class="nx">added</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">eyeOrigin</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">eyeOrigin</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">position</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">camera</span><span class="err">:</span> <span class="nx">the</span> <span class="nx">cssObjects</span> <span class="nx">will</span> <span class="nx">always</span> <span class="nx">appear</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">same</span> <span class="nx">locations</span> <span class="nx">relative</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">camera</span><span class="p">.</span> <span class="o">&lt;</span><span class="sr">/p&gt;  </span><span class="err"> 
</span>  <span class="o">&lt;</span><span class="sr">/body&gt;</span></code></pre></figure>

<h3 id="code-file-appjs">Code file (app.js)</h3>
<p>This example (like the next one, Periodic table) is adapted and simplified from the three.js periodic table example. For the original version, see http://threejs.org/examples/#css3d_periodictable.</p>

<p>We start by initializing (see 1-Getting Started).</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">.</span><span class="nx">createArgonOptions</span><span class="p">(</span> <span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span> <span class="p">);</span>
<span class="nx">options</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="p">{</span> <span class="na">klass</span><span class="p">:</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CSS3DRenderer</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">three</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">(</span> <span class="nx">options</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">eyeOrigin</span> <span class="o">=</span> <span class="nx">three</span><span class="p">.</span><span class="nx">argon</span><span class="p">.</span><span class="nx">objectFromEntity</span><span class="p">(</span><span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span><span class="p">.</span><span class="nx">eyeOrigin</span><span class="p">);</span></code></pre></figure>

<p>eyeOrigin is the Argon object linked to the (Argon-Cesium) Entity that contains the position of the camera. All the 6 objects that we will create will be positioned relative to eyeOrigin.</p>

<h3 id="creating-and-placing-the-6-directional-signs-around-the-camera--user">Creating and placing the 6 directional signs around the camera / user</h3>
<p>Table is an array of arrays; each inner array contains information for one of the six direction signs to be created. The first three elements in the array consist of textual information that will be displayed on the sign; the next three specify the x-y-z displacement from the camera (in meters); the last three are the x-y-z values of the rotation vector for the sign. The sign needs to be rotated so that the front faces the user / camera.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span> <span class="s2">"N"</span><span class="p">,</span> <span class="s2">"North"</span><span class="p">,</span> <span class="s2">"(Negative Z)"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span> <span class="s2">"S"</span><span class="p">,</span> <span class="s2">"South"</span><span class="p">,</span> <span class="s2">"(Positive Z)"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mi">0</span>  <span class="p">],</span>
    <span class="p">[</span> <span class="s2">"E"</span><span class="p">,</span> <span class="s2">"East"</span><span class="p">,</span> <span class="s2">"(Positive X)"</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span>
    <span class="p">[</span> <span class="s2">"W"</span><span class="p">,</span> <span class="s2">"West"</span><span class="p">,</span> <span class="s2">"(Negative X)"</span><span class="p">,</span> <span class="o">-</span><span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span>
    <span class="p">[</span> <span class="s2">"U"</span><span class="p">,</span> <span class="s2">"Up"</span><span class="p">,</span> <span class="s2">"(Positive Y)"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span>
    <span class="p">[</span> <span class="s2">"D"</span><span class="p">,</span> <span class="s2">"Down"</span><span class="p">,</span> <span class="s2">"(Negative Y)"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>  <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">]</span>
  <span class="p">];</span></code></pre></figure>

<p>We create a root object in three.js, to which we attach all the others.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">()</span></code></pre></figure>

<p>We loop through the table, creating the divs that make up each sign.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">table</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">table</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

    <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'element'</span><span class="p">;</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">'rgba(200,120,200,1)'</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
    <span class="nx">symbol</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'symbol'</span><span class="p">;</span>
    <span class="nx">symbol</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">symbol</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">details</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
    <span class="nx">details</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'details'</span><span class="p">;</span>
    <span class="nx">details</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="s1">'&lt;br&gt;'</span> <span class="o">+</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">details</span> <span class="p">);</span></code></pre></figure>

<p>Here we create the 3D object from the div element, push it on a stack for use later, and then add the new object to the root object.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CSS3DObject</span><span class="p">(</span> <span class="nx">element</span> <span class="p">);</span>
   <span class="nx">object</span><span class="p">.</span><span class="nx">matrixAutoUpdate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
   <span class="nx">objects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">object</span> <span class="p">);</span>
   <span class="nx">root</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
 </code></pre></figure>

<p>The root object now has all six of the signs; so we attach it to the eyeOrigin.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">eyeOrigin</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">root</span><span class="p">);</span>
 </code></pre></figure>

<p>Finally we loop through and position the six sign objects at the compass points by copying the position vector from the table array into the object. We also rotate each sign so that it faces the camera/user.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">table</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">();</span>
      <span class="c1">// three position values</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">3</span> <span class="p">];</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">4</span> <span class="p">];</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">5</span> <span class="p">];</span>
      <span class="c1">//the three axes of rotation</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">6</span> <span class="p">];</span>      
      <span class="nx">target</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">7</span> <span class="p">];</span>   
      <span class="nx">target</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">8</span> <span class="p">];</span>   

      <span class="nx">object</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
      <span class="nx">object</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">);</span>
      <span class="nx">object</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">rotation</span><span class="p">);</span>
      <span class="nx">object</span><span class="p">.</span><span class="nx">updateMatrix</span><span class="p">();</span>
  <span class="p">}</span>
 </code></pre></figure>

<p>Because all the objects are placed relative to the eyeOrigin, they will move with the user/camera. In the next tutorial-example (5-Periodic), we show a more elaborate version of this same idea and also illustrates how the user can interact with 3D objects through the use of buttons on the screen.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/tutorials/Tutorial1.html">
        Tutorial 1 - GETTING STARTED
      </a>
    </h1>

    <span class="post-date">01 Mar 2016</span>

    <h3 id="welcome">Welcome</h3>
<p><strong>Quick Demo:</strong>
Download <a href="https://itunes.apple.com/us/app/argon3/id944297993?ls=1&amp;mt=8">Argon3</a> and <a href="/argon-tutorials/tutorial1">Try Now</a></p>

<h3 id="setting-up">Setting up</h3>

<p>Step 1: Go to Argonjs <a href="https://github.com/argonjs/argon.js">Github repository</a>.</p>

<p>Step 2: Click the “download ZIP” button to the right of the Github page.</p>

<p>Step 3: Unzip these files and move them onto a personal server.</p>

<p>Step 4: Install <a href="https://itunes.apple.com/us/app/argon3/id944297993?ls=1&amp;mt=8">Argon3</a>  from the App Store onto an iOS device.</p>

<p>Step 5: Access your server from the Argon3 mobile browser and open the folder containing your newly unzipped files. The path is: <em>argon.js/dist/examples/tutotial1</em>. or <a href="/argon-tutorials.zip">Download</a> tutorials source files from this site.</p>

<p>Step 6: You should see an icon on the corner of your screen. This means you have completed the tutorial!</p>

<h3 id="introduction">Introduction</h3>

<p>An argon.js web application is created like any other web application; a server responds to http protocol requests and delivers an HTML5 web application to the browser. In these examples, we will use static HTML and Javascript files, but any dynamic web application server could be used. The files will include argon.js (as well other javascript libraries such as three.js, a 3D framework). The main or launch file (e.g. index.html) has the following structure:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&lt;!</span><span class="nx">doctype</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/html</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">charset</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"viewport"</span> <span class="nx">content</span><span class="o">=</span><span class="s2">"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"</span><span class="o">&gt;</span>

<span class="c">&lt;!--</span><span class="nx">three</span><span class="p">.</span><span class="nx">js</span><span class="p">,</span> <span class="nx">a</span> <span class="mi">3</span><span class="nx">D</span> <span class="nx">Scene</span> <span class="nx">graph</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">web</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"../../js/three.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="c">&lt;!--</span><span class="nx">threestrap</span><span class="p">.</span><span class="nx">js</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">bootstrapping</span> <span class="nx">library</span> <span class="nx">that</span> <span class="nx">makes</span> <span class="nx">three</span><span class="p">.</span><span class="nx">js</span> <span class="nx">easier</span> <span class="nx">to</span> <span class="nx">work</span> <span class="kd">with</span><span class="p">.</span>  <span class="nx">Argon</span><span class="o">-</span><span class="nx">three</span><span class="p">.</span><span class="nx">js</span> <span class="nx">requires</span> <span class="nx">it</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"../../js/threestrap.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="c">&lt;!--</span><span class="nx">The</span> <span class="nx">argon</span> <span class="nx">library</span> <span class="nx">support</span> <span class="k">for</span> <span class="nx">integration</span> <span class="nx">of</span> <span class="nx">three</span><span class="p">.</span><span class="nx">js</span> <span class="nx">and</span> <span class="nx">argon</span><span class="p">.</span><span class="nx">js</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"../../build/argon.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"../../build/argon-three.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="c">&lt;!--</span> <span class="nx">One</span> <span class="nx">or</span> <span class="nx">more</span> <span class="nx">style</span> <span class="nx">sheets</span> <span class="k">for</span> <span class="nx">styling</span> <span class="nx">the</span> <span class="nx">elements</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">body</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">link</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">"stylesheet"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/css"</span> <span class="nx">href</span><span class="o">=</span><span class="s2">"style.css"</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"argon-immersive-context"</span><span class="o">&gt;</span>
         <span class="c">&lt;!--</span><span class="nx">any</span> <span class="nx">html</span> <span class="k">for</span> <span class="kr">interface</span> <span class="nx">elements</span> <span class="nx">etc</span><span class="p">.</span> <span class="nx">that</span> <span class="nx">will</span> <span class="nx">appear</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">screen</span> <span class="k">in</span> <span class="nx">AR</span> <span class="nx">mode</span><span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="c">&lt;!--</span><span class="nx">one</span> <span class="nx">or</span> <span class="nx">more</span> <span class="nx">divs</span> <span class="nx">that</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">appear</span> <span class="k">in</span> <span class="s2">"page mode"</span> <span class="nx">described</span> <span class="nx">below</span><span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span>
<span class="c">&lt;!--</span><span class="nx">application</span> <span class="nx">javascript</span> <span class="nx">code</span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"../app.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="sr">/html&gt;</span></code></pre></figure>

<p>In these examples, we follow a coding style that does not include any inline Javascript, but rather puts the main application code in an external javascript file included at the bottom of the page, after the body.</p>

<h3 id="the-html-page-indexhtml">The html page (index.html)</h3>

<p>In addition to offering AR features (such as geolocation, video of the surrounding word, 3D graphics and image tracking), the Argon3 browser is a standard web browser (e.g., on iOS, it uses Apple’s web renderer) and can therefore render any web content available on the platform. You can take advantage of these capabilities in three ways.</p>

<ul>
  <li>
    <p>First, argon uses (or creates) a special div with the id argon-immersive-context. Anything you put in this div (or in divs nested inside this one) will be rendered on the screen in 2D, in front of the 3D AR context (argon-three.js creates a CSS 3D perspective div and/or WebGL canvas behind any other content in this div, into which the 3D AR content is rendered). You can use this feature to create interface elements such as display boxes or button to provide information and interactivity for your application. You can see examples of this special argon div in <a href="/2016/03/01/Tutorial5">tutorials 5 (Geolocation)</a> and <a href="/2016/03/01/Tutorial3">3 (Periodic)</a>.</p>
  </li>
  <li>
    <p>Second, you can put any additional divs into the body that you wish. These will be visible when the user puts the Argon3 browser into “Page Mode” by touching the toggle button in the upper right hand corner of the interface. Argon3 will enable the “Page Mode” button when it sees non-AR content in the &lt;body&gt;&lt;/body&gt; of the document. Initially, this non-AR content is hidden. When the user activates Page Mode, the 3D content in that channel disappears (i.e., the content argon-three.js inserted into the argon-immersive-context), and the user sees the other HTML of the page (which is normally hidden). You can use this feature to add instructions, text, images, or any other multimedia content to your argon.js experience. For example, in tutorials 2-6, we add text that explains the purpose of the example.</p>
  </li>
  <li>
    <p>Third, because Webkit is a full-featured HTML5 engine (used by Safari), Argon can render most web pages (e.g., including those without any AR features). Just type the url into the text box.</p>
  </li>
</ul>

<h3 id="the-application-code-appjs">The application code (app.js)</h3>
<p>In these tutorials, we place the application javascript in a separate file (you can create your web applications as you see fit, placing all content wherever you prefer, as with any web application). Segregating the javascript code into a file separate from index.html file allows for a cleaner workflow as well as the use of a wide variety of Javascript development tools to transcode, minify or otherwise manipulate your code. We name the file app.js in each of the tutorials.</p>

<p>Inside app.js, in order to initialize Argon, scripts typically begin with:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">.</span><span class="nx">createArgonOptions</span><span class="p">(</span> <span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span> <span class="p">)</span>
<span class="nx">options</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="p">{</span> <span class="na">klass</span><span class="p">:</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CSS3DRenderer</span> <span class="p">}</span>
<span class="kd">var</span> <span class="nx">three</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span></code></pre></figure>

<ul>
  <li>
    <p>Line 1 requests the default immersiveContext (the view from the device’s camera) as the surrounding visual environment that will be shown. (argon.js will eventually support having other Contexts in addition to the default immersiveContext, such as having embedded AR contexts in Page Mode. )</p>
  </li>
  <li>
    <p>Line 2 indicates which renderer this web application will use. The three.js CSS renderer is used here. Alternatives include the WebGL renderer (options.renderer = { klass: THREE.WebGLRenderer }) or a combined WebGL/CSS3 renderer (options.renderer = {klass: THREE.MultiRenderer })</p>
  </li>
  <li>
    <p>Line 3 uses threestrap to create a three.js scene graph along with the chosen renderer and store it as the variable three.</p>
  </li>
</ul>

<p>Together these three lines initialize the argon.js framework to use the device’s camera to display the world as an immersive background and create a scene graph to which the channel can attach 3D content.  You then add the javascript code that creates and manipulates that content. For a first example of how this works, continue to <a href="/2016/03/01/Tutorial5">Tutorials 5 (Geolocation)</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/tutorials/Overview.html">
        Overview
      </a>
    </h1>

    <span class="post-date">01 Mar 2016</span>

    <p>This site contains a collection of tutorials for web developers using argon.js to add AR content to a web application. On this page, we provide an overview of the design of argon.js, introducing the terminology and concepts used by the framework. In the tutorials, we will go through a sequence of examples that show how to leverage the various features of argon.js in a web application.</p>

<h3 id="design-goals">DESIGN GOALS</h3>

<p>The goal of the argon.js framework and associated Argon AR-enabled web browser (currently on iOS) is to use web technologies to create fully-registered 3D AR applications that leverage 3D graphics, geo-spatial-positioning, and computer-vision tracking (currently using <a href="https://www.vuforia.com/">Qualcomm’s Vuforia</a> library). While all these capabilities are currently available only in the <em>Argon browser, argon.js</em> was designed to help developers create platform-independent AR web content that will eventually run on other platforms as the necessary features for 3D AR become available. Therefore, the central design goal of <em>argon.js</em> is to provide an abstraction layer between the web-app and the browser.</p>

<h3 id="abstractions">ABSTRACTIONS</h3>

<p>The argon.js <strong>abstractions</strong> are based around an AR <strong>Context</strong> in which AR content lives. A <strong>Context</strong> combines AR content with some representation of <strong>Reality</strong>. On a mobile phone or tablet, this <strong>Reality</strong> will usually be video-mixed AR (overlaying graphics on the video from the device’s camera), but the <strong>Reality</strong> could also include geo-located panoramic images, remote video, or simple transparency on an optical see-through display, to name a few. A Reality is defined by a visual representation of the world and a <strong>Reference Frame</strong> that defines the 3D eye position of the viewer relative to the <strong>Reality</strong>’s visual representation (the eye <strong>Reference Frame</strong>). Some <strong>Realities</strong> may contain more <strong>Reference Frames</strong> as well (e.g., our current <strong>Realities</strong> define an eyeOrigin reference frame that is positioned at the location of the eye, but oriented such that the z-axis points up and the y-axis points north, following geospatial conventions).</p>

<h3 id="reactive-programming">REACTIVE PROGRAMMING</h3>

<p><em>argon.js</em> follows a reactive programming model. Programmers do not create <strong>Contexts</strong>; they either request a specific <strong>Context</strong> (e.g., one that displays a certain kind of panoramic image) or express the capabilities they need (e.g., geolocation, Vuforia vision tracking), and <em>argon.js</em> supplies a Context based on the capabilities of the platform. By encouraging developers to develop applications based on the capabilities they need, <em>argon.js</em> applications are more likely to run on new platforms as they become available.</p>

<p>A second reason for using a reactive programming model is to support situations where the <strong>Reality</strong> may need to change while the channel is running. The <em>argon.js</em> framework anticipates a future in which custom AR browsers may give users control over the way they interact with AR content, and let them (not the applications) control how they are displayed by allowing them to change their view of <strong>Reality</strong>. For example, a user might want to switch from live video to remote video to a virtual flyover of their area, while an AR application is running. Similarly, in these future browsers, users may want to run multiple AR applications simultaneously, and different application requirements may cause the browser to use different <strong>Realities</strong> for the different applications. We will be exploring these ideas with the <em>Argon3 browser</em> (which already allows multiple channels to run and be visible at the same time, for example), and their needs have informed the design of <em>argon.js</em>.</p>

<p><em>argon.js</em> does not prescribe or support any particular rendering or content library. Rather, it provides a uniform view of the data necessary for a real-time 3D AR application to the web developer. In our work, we have been using the <a href="http://threejs.org/">three.js</a> rendering library for 3D content and have created a utility library, <em>argon-three.js</em>, to simplify using Argon and Three together. This library also serves as an example of how to integrate other web content libraries with <em>argon.js</em> (e.g., we plan on creating a binding to the FamousEngine soon).</p>

<h3 id="frames-of-reference-and-local-rendering">FRAMES OF REFERENCE AND LOCAL RENDERING</h3>

<p>One of Argon’s main features is providing geospatial <strong>Reference Frames</strong> for all AR content and making it simple to render content relative to those <strong>Reference Frames</strong>. Programmers must therefore be aware of the relationship between the <em>argon.js</em> <strong>Reference Frames</strong> and the coordinate system used by a rendering library such as <em>three.js</em>. In Argon, all objects are represented in geospatial coordinates, using <a href="http://cesiumjs.org/">cesium.js</a> <em>Entities</em>. This allows accurate representation and manipulation of frames of reference anywhere on the Earth, and (using Cesium’s INERTIAL reference frames) anywhere in celestial coordinates relative to the earth.</p>

<p>The geospatial coordinate system used for these reference frames is not convenient for rendering with a typical 3D graphics library: it is centered at the center of the earth, with z being the line between the north and south poles and the xy plane going through the equator. The values of objects on the surface of the earth in this frame make no intuitive sense to a developer, and the size of the numbers used in this frame can present problems to some rendering systems. Therefore, <em>argon.js</em> defines a localOrigin <strong>Reference Frame</strong>, which is an arbitrary location on the surface of the earth near the eye <strong>Reference Frame</strong>, oriented such that (like eyeOrigin) the z-axis is pointing up and the y-axis is pointing north. (Currently, localOrigin is initialized to the location of the device when the web application is launched, and reset when the eye is more than 5km from the localOrigin, although this implication detail may change).</p>

<p>In <em>argon-three.js</em>, the origin of the <em>three.js</em> scene is the localOrigin, and all objects in the three.js scene are positioned relative to it. We expect any rendering library would leverage the localOrigin similarly. By keeping the rendering camera near the origin of the world, floating point accuracy is maximized close to the user, and objects far from the origin (which may suffer floating point artifacts) are also far from the camera (minimizing the impact of those artifacts).</p>

<p>The implication of using an arbitrary local origin for rendering is three-fold:</p>

<ul>
  <li>All content in the 3D scene (i.e., all 3D content in the world) should be a child of some Object3D in the scene that is positioned relative to some Cesium Entity (argon-three.js provides utility functions to create these relationships and maintains them automatically). argon-three.js will automatically update the position and orientation of those entities when the localOrigin changes.</li>
  <li>The absolute 3D position and orientation of content in the 3D world can change over time and has no pre-defined relationship to geospatial coordinates. To get the geospatial location of an object in the scene (e.g., of an Object3D in the three.js scene graph), the programmer must first get the geospatial coordinates of a Cesium Entity that corresponds to an Object3D that is an ancester of the object in the scene graph, and combine it with the relative position and orientation of this child object.</li>
  <li>An argon.js application should not change the position and orientation of an Object3D in the scene bound to some Cesium Entity, as Argon will reset their position and orientation regularly.</li>
</ul>

<h3 id="a-note-about-html5-dom-performance-in-3d-web-applications">A Note About HTML5 DOM Performance in 3D Web Applications</h3>

<p>The performance of any web application is bound to the way an application interacts with the DOM. Any time the value of a DOM property is changed, the DOM is marked as dirty and scheduled to be repaired and refreshed. If a DOM property is read when the DOM is dirty, the entire page will be immediately repaired and reflowed before returning the value of the DOM property. In a traditional 2D web page, this guarantees that the properties are correct, and that content is updated automatically when something changes. When nothing changes, the page does not need to be refreshed.</p>

<p>However, in a 3D web page, such as those created with <em>argon.js</em>, the page is rendered continuously, at speeds of 30, 60 or more times per second. DOM repair is <strong>very expensive</strong>, and even a single extra repair will dramatically affect the performance of a 3D web app.</p>

<p>Therefore, we strongly advise against unnecessarily reading any DOM properties, especially after changing any properties. Similarly, property updates should also be minimized.</p>

  </div>
  
</div>

<div class="pagination">
  
    <span class="pagination-item older">Older</span>
  
  
    
      <a class="pagination-item newer" href="/">Newer</a>
    
  
</div>
      </div>
    </div>

  </body>
</html>

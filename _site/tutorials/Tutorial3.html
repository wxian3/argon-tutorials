<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Tutorial 3 - Periodic table &middot; Argonjs
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-09">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>This site contains a collection of tutorials for web developers using <a href="http://argonjs.io" target="_blank">argon.js</a> to add AR content to a web application.</p>
  </div>

  <nav class="sidebar-nav">
    <li class="sidebar-nav-item"><a href="/tutorials/WelcomePage">Home</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Overview">Overview</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial1">Tutorial 1</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial2">Tutorial 2</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial3">Tutorial 3</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial4">Tutorial 4</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial5">Tutorial 5</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Tutorial6">Tutorial 6</a></li>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about">About</a>
        
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="/argon-tutorials.zip">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/argonjs/argon.js">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Argonjs</a>
            <small>Tutorials</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Tutorial 3 - Periodic table</h1>
  <span class="post-date">01 Mar 2016</span>
  <h3 id="before-you-start">Before you start</h3>
<p>Make sure you have completed <a href="/about">tutorial 1</a></p>

<h3 id="what-you-should-see">What you should see</h3>
<p>Download <a href="https://itunes.apple.com/us/app/argon3/id944297993?ls=1&amp;mt=8">Argon3</a> and <a href="/argon-tutorials/tutorial5">Try Now</a></p>

<p>Move your camera around until you see green boxes with chemical abbreviations and other information floating in space to the north.
At the bottom of the screen, you should see four buttons (“table”, “sphere,” “helix,” and “grid”). Tapping on these buttons will change the shape of the periodic table.</p>
<div class="video">
    <figure>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/XFt-2UQ64_Q" frameborder="0" allowfullscreen=""></iframe>
    </figure>
</div>

<h3 id="introduction">Introduction</h3>
<p>This example is similar to 4-Directions. It consists of a set of divs arranged in space around the user. It is an Argon3 adaptation of the Periodic table example written for three.js (http://mrdoob.com/lab/javascript/threejs/css3d/periodictable/). The elements are arranged in four different configurations: table (flat in space in front of the user/camera), sphere (around the user), helix (around the user), and grid (around the user). This example also illustrates how to design user interaction into an Argon3 web application by placing buttons on the screen and adding event listeners that respond when the user touches a button.</p>

<h3 id="main-file-indexhtml">Main file (index.html)</h3>
<p>In the index.html file, we place an explanation of the example in the body tag: this will appear when the user enters Page Mode. In addition, we use the special div with the id = “argon-immersive-context” to arrange a series of buttons for user interaction: these buttons determine which configuration the periodic table will appear in.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"argon-immersive-context"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"menu"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"table"</span><span class="o">&gt;</span><span class="nx">TABLE</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"sphere"</span><span class="o">&gt;</span><span class="nx">SPHERE</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"helix"</span><span class="o">&gt;</span><span class="nx">HELIX</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"grid"</span><span class="o">&gt;</span><span class="nx">GRID</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Periodic</span> <span class="nx">table</span> <span class="p">(</span><span class="nx">from</span> <span class="nx">three</span><span class="p">.</span><span class="nx">js</span><span class="p">)</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span> <span class="nx">This</span> <span class="nx">example</span> <span class="nx">adapts</span> <span class="nx">a</span> <span class="nx">three</span><span class="p">.</span><span class="nx">js</span> <span class="nx">example</span> <span class="nx">showing</span> <span class="nx">the</span> <span class="nx">Periodic</span> <span class="nx">elements</span><span class="p">.</span> <span class="nx">In</span> <span class="nx">the</span> <span class="nx">three</span><span class="p">.</span><span class="nx">js</span> <span class="nx">documentation</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">can</span> <span class="nx">find</span> <span class="nx">the</span>  <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">"http://threejs.org/examples/#css3d_periodictable"</span><span class="o">&gt;</span><span class="nx">example</span> <span class="nx">written</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">screen</span><span class="o">&lt;</span><span class="sr">/a&gt;: The Argon3 version shows the four versions of the periodic table handing in space around the user. This illustrates how *three.js* is used to present and manipulate 3D graphics in Argon3. &lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="sr">/body&gt;</span></code></pre></figure>

<p>These buttons are styled according to the style commands in style.css. (See that file for details.)</p>

<p>In app.js, we place the javascript code that actually draws the periodic table in various forms depending on which button the user touches.</p>

<h3 id="code-file-appjs">Code file (app.js)</h3>
<p>We start by defining a data structure that contains the periodic table information (as an array of array elements. This table as an array of arrays: one for each element.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span> <span class="s2">"H"</span><span class="p">,</span> <span class="s2">"Hydrogen"</span><span class="p">,</span> <span class="s2">"1.00794"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span>
  <span class="p">[</span> <span class="s2">"He"</span><span class="p">,</span> <span class="s2">"Helium"</span><span class="p">,</span> <span class="s2">"4.002602"</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span>
  <span class="p">[</span> <span class="s2">"Li"</span><span class="p">,</span> <span class="s2">"Lithium"</span><span class="p">,</span> <span class="s2">"6.941"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">],</span>
  <span class="err">…</span><span class="k">for</span> <span class="nx">the</span> <span class="nx">complete</span> <span class="nx">array</span> <span class="nx">see</span> <span class="nx">the</span> <span class="nx">source</span> <span class="nx">code</span><span class="err">…</span>
  <span class="p">[</span> <span class="s2">"Uuo"</span><span class="p">,</span> <span class="s2">"Ununoctium"</span><span class="p">,</span> <span class="s2">"(294)"</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">7</span> <span class="p">]</span>
  <span class="p">];</span></code></pre></figure>

<p>Next we initialize Argon as in the previous example 4-Directions:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">.</span><span class="nx">createArgonOptions</span><span class="p">(</span> <span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span> <span class="p">);</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="p">{</span> <span class="na">klass</span><span class="p">:</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CSS3DRenderer</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">three</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">(</span> <span class="nx">options</span> <span class="p">);</span>
  <span class="kd">var</span> <span class="nx">eyeOrigin</span> <span class="o">=</span> <span class="nx">three</span><span class="p">.</span><span class="nx">argon</span><span class="p">.</span><span class="nx">objectFromEntity</span><span class="p">(</span><span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span><span class="p">.</span><span class="nx">eyeOrigin</span><span class="p">);</span></code></pre></figure>

<h3 id="creating-the-periodic-table-using-threejs">Creating the periodic table using three.js</h3>
<p>Here we declare and initialize data structures for the four formats of the periodic table. We create a root object at the top of the scene graph in three.js, to which we will add all the table information.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="kd">var</span> <span class="nx">targets</span> <span class="o">=</span> <span class="p">{</span> <span class="na">table</span><span class="p">:</span> <span class="p">[],</span> <span class="na">sphere</span><span class="p">:</span> <span class="p">[],</span> <span class="na">helix</span><span class="p">:</span> <span class="p">[],</span> <span class="na">grid</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">()</span></code></pre></figure>

<p>Similar to 4-Directions, we step though the periodic table array and for each element create an enclosing div (the variable element) and append three divs that display information. Make the element div into a CSS object and attach that object to the root in the scene graph. Also add that object to an array of all the element objects.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">table</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">table</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
    <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'element'</span><span class="p">;</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">'rgba(0,127,127,1)'</span><span class="p">;</span>

    <span class="c1">// if it's Argon make it bright red</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">==</span><span class="mi">17</span><span class="p">)</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">'rgba(127,0,0,1)'</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">number</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
      <span class="nx">number</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'number'</span><span class="p">;</span>
      <span class="nx">number</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">number</span> <span class="p">);</span>

      <span class="kd">var</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
      <span class="nx">symbol</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'symbol'</span><span class="p">;</span>
      <span class="nx">symbol</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">symbol</span> <span class="p">);</span>

      <span class="kd">var</span> <span class="nx">details</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">'div'</span> <span class="p">);</span>
      <span class="nx">details</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'details'</span><span class="p">;</span>
      <span class="nx">details</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="s1">'&lt;br&gt;'</span> <span class="o">+</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">details</span> <span class="p">);</span>

      <span class="c1">// make a css 3d object for this element</span>
      <span class="kd">var</span> <span class="nx">object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">CSS3DObject</span><span class="p">(</span> <span class="nx">element</span> <span class="p">);</span>
      <span class="nx">object</span><span class="p">.</span><span class="nx">matrixAutoUpdate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">objects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">object</span> <span class="p">);</span>

      <span class="c1">// Add the object to the root node of the scene graph</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
      <span class="p">}</span></code></pre></figure>

<p>Now that we have built up the whole table of elements, add the root to the eyeOrigin, which we created on initialization. This connects our three.js objects to the Argon positioning system, based on Cesium entities (as explained in 0-Background)</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">eyeOrigin</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">root</span><span class="p">);</span></code></pre></figure>

<p>There are four configurations: table, sphere, helix, and grid. Each element has to be positioned in space relative to the other elements in that configuration and oriented toward the camera. We step through the table again, creating a target object with the right x, y, z coordinates.</p>

<h3 id="the-basic-table-configuration">The basic table configuration</h3>

<p>The table will appear as a wall of rectangular signs (divs) in front of the user:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">table</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">();</span>
  <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">140</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1330</span><span class="p">;</span>
  <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">item</span><span class="p">[</span> <span class="mi">4</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">180</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">990</span><span class="p">;</span>
  <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="o">-</span> <span class="mi">1000</span><span class="p">;</span>

<span class="c1">//Push this target into the target array for the table configuration</span>
  <span class="nx">targets</span><span class="p">.</span><span class="nx">table</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
<span class="p">};</span></code></pre></figure>

<h3 id="the-sphere-configuration">The sphere configuration</h3>

<p>In this configuration the signs divs for the elements surround the user (camera) at the center of the sphere.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">vector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">phi</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">acos</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">i</span> <span class="p">)</span> <span class="o">/</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
      <span class="kd">var</span> <span class="nx">theta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">phi</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">();</span>

      <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">800</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span> <span class="nx">theta</span> <span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span> <span class="nx">phi</span> <span class="p">);</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">800</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span> <span class="nx">theta</span> <span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span> <span class="nx">phi</span> <span class="p">);</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mi">800</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span> <span class="nx">phi</span> <span class="p">);</span>

      <span class="nx">Orient</span> <span class="nx">the</span> <span class="nx">target</span> <span class="nx">div</span> <span class="nx">to</span> <span class="nx">face</span> <span class="nx">the</span> <span class="nx">user</span><span class="o">/</span><span class="nx">camera</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">lookAt</span><span class="p">(</span> <span class="nx">vector</span> <span class="p">);</span>

      <span class="nx">Push</span> <span class="nx">target</span> <span class="nx">into</span> <span class="nx">the</span> <span class="nx">target</span> <span class="nx">array</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">sphere</span> <span class="nx">configuration</span>
      <span class="nx">targets</span><span class="p">.</span><span class="nx">sphere</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
    <span class="p">}</span></code></pre></figure>

<h4 id="the-helix-configuration">The helix configuration</h4>
<p>In this configuration the element divs wrap themselves around the user/camera to form a helix:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">vector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">phi</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">0.175</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">();</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">900</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span> <span class="o">-</span><span class="nx">phi</span> <span class="p">);</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">8</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">450</span><span class="p">;</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mi">900</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span> <span class="o">-</span><span class="nx">phi</span> <span class="p">);</span>
    <span class="nx">vector</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">vector</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">vector</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="o">-</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">lookAt</span><span class="p">(</span> <span class="nx">vector</span> <span class="p">);</span>
    <span class="nx">targets</span><span class="p">.</span><span class="nx">helix</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
  <span class="p">}</span>
  </code></pre></figure>

<h3 id="the-grid-configuration">The grid configuration</h3>
<p>In this configuration, the element divs appear at various depths in the space around the user.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">target</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Object3D</span><span class="p">();</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">400</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">800</span><span class="p">;</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span> <span class="o">-</span> <span class="p">(</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span> <span class="nx">i</span> <span class="o">/</span> <span class="mi">5</span> <span class="p">)</span> <span class="o">%</span> <span class="mi">5</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">400</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">800</span><span class="p">;</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span> <span class="nx">i</span> <span class="o">/</span> <span class="mi">25</span> <span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">-</span> <span class="mi">2500</span><span class="p">;</span>
    <span class="nx">targets</span><span class="p">.</span><span class="nx">grid</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>

  <span class="p">}</span></code></pre></figure>

<h3 id="setting-the-buttons-on-the-screen-to-switch-between-the-above-configurations-table-sphere-helix-grid">Setting the buttons on the screen to switch between the above configurations (table, sphere, helix, grid)</h3>

<p>The buttons (table, sphere, helix, grid) were defined in the body tag in index.html. Here we attach an event listener to each of the buttons in the button bar (in the div in the body). Each button calls the transform function with the appropriate target array: targets.table, targets.sphere, targets.helix, or targets.grid.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="s1">'table'</span> <span class="p">);</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">transform</span><span class="p">(</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">table</span><span class="p">,</span> <span class="mi">2000</span> <span class="p">);</span>
    <span class="p">},</span> <span class="kc">false</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="s1">'sphere'</span> <span class="p">);</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">transform</span><span class="p">(</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">sphere</span><span class="p">,</span> <span class="mi">2000</span> <span class="p">);</span>
    <span class="p">},</span> <span class="kc">false</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="s1">'helix'</span> <span class="p">);</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">transform</span><span class="p">(</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">helix</span><span class="p">,</span> <span class="mi">2000</span> <span class="p">);</span>
    <span class="p">},</span> <span class="kc">false</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="s1">'grid'</span> <span class="p">);</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">transform</span><span class="p">(</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">grid</span><span class="p">,</span> <span class="mi">2000</span> <span class="p">);</span>
    <span class="p">},</span> <span class="kc">false</span> <span class="p">);</span></code></pre></figure>

<h3 id="the-transform-function-to-switch-the-configuration">The transform function to switch the configuration</h3>

<p>The transform function puts a copy of the position and orientation information for the target configuration into the object (the periodic table element as drawn on the scene). It then calls updateMatrix() on the object to get it redrawn. Each redrawn object will be in the new configuration.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">transform</span><span class="p">(</span> <span class="nx">targets</span><span class="p">,</span> <span class="nx">duration</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">object</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="nx">targets</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">rotation</span><span class="p">)</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">updateMatrix</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Finally the script calls the transform for the first time, drawing the table configuration:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">transform</span><span class="p">(</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">table</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span></code></pre></figure>

<h3 id="modify-this-code">Modify this code</h3>
<p>In this example the target values are copied, which creates an instantaneous transformation from table to sphere etc. As an exercise, you could try to modify this code to make the values tween smoothly to the next configuration. The transform function above has a value as the duration parameter. You could implement code to set that value to something other than 0 to indicate how fast the tweening would take place.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/tutorials/WelcomePage.html">
            Welcome
            <small>01 Mar 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/tutorials/Tutorial6.html">
            Tutorial 6 - Using Argon.js with Vuforia
            <small>01 Mar 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/tutorials/Tutorial5.html">
            Tutorial 5 - Geolocation
            <small>01 Mar 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

  </body>
</html>

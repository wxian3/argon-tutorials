<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Tutorial 6 - Using Argon.js with Vuforia &middot; Argonjs
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-09">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>This site contains a collection of tutorials for web developers using <a href="http://argonjs.io" target="_blank">argon.js</a> to add AR content to a web application.</p>
  </div>

  <nav class="sidebar-nav">
    <li class="sidebar-nav-item"><a href="/tutorials/WelcomePage">Home</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/Overview">Overview</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial1">Tutorial 1 - Getting Started</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial2">Tutorial 2 - Compass</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial3">Tutorial 3 - Periodic Table</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial4">Tutorial 4 - Panorama Reality</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial5">Tutorial 5 - Geolocation</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial6">Tutorial 6 - Use Argon.js with Vuforia</a></li>
    <li class="sidebar-nav-item"><a href="/tutorials/tutorial7">Tutorial 7 - Building and Debugging</a></li>

    

    
    
      
        
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="/argon.js.zip">Download Argon.js</a>
    <a class="sidebar-nav-item" href="https://github.com/argonjs/argon.js">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Argonjs</a>
            <small>Tutorials</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Tutorial 6 - Using Argon.js with Vuforia</h1>
  <span class="post-date">01 Mar 2016</span>
  <h3 id="before-you-start">Before you start</h3>
<p>Make sure you have completed <a href="/tutorials/tutorial1">tutorial 1</a>
Follow:<a href="https://developer.vuforia.com/sites/default/files/sample-apps/targets/imagetargets_targets.pdf">this</a> link to view the image targets used in this tutorial</p>

<h3 id="what-you-should-see">What you should see</h3>
<p>Download <a href="https://itunes.apple.com/us/app/argon3/id944297993?ls=1&amp;mt=8">Argon3</a> and <a href="/code/argon.js/dist/argon-tutorials/tutorial6-Vuforia">Try Now</a></p>

<ol>
  <li>When your camera captures the stones image, you should see a colorful, 3d box floating and spinning above the image.</li>
</ol>
<div class="video">
    <figure>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/cxAPl8iK5cc" frameborder="0" allowfullscreen=""></iframe>
    </figure>
</div>

<ol>
  <li>When your camera captures the wood chips image, you should see an animated 3D graphic monster. (It looks something like a four-legged lizard walking in place.)
You can move your camera to view the 3d objects from different angles.</li>
</ol>
<div class="video">
    <figure>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/ohvHKrk5AY8" frameborder="0" allowfullscreen=""></iframe>
    </figure>
</div>

<h3 id="introduction">Introduction</h3>
<p>Vuforia is the image tracking system from Qualcomm <a href="https://www.qualcomm.com/products/vuforia">Vuforia</a>, which <em>argon.js</em> uses to recognize an image from a database and register graphics in relation to the image. This tutorial shows how to use an image from a database within <em>argon.js</em>. To use this feature effectively, you need to register with Vuforia and create your own database of images. When you register with Vuforia, you will receive a key to your database. This key guarantees that only the users of your applications can access your database. To use Vuforia in Argon3, you will need to insert an encrypted form of your key into your code.<br />
For the purposes of this tutorial example, however, we can use the standard “stones and chips” images provided by Vuforia without a developer’s key.  On top of the stones image, we will place a box  that spins. On top of the chips images, we place an animated 3D graphic monster. (It looks something like a four-legged lizard  walking in place.)</p>

<h2 id="main-file-indexhtml">Main file (index.html)</h2>

<p>Here is the html that goes into the body.  There is no “argon-immersive-context” div in this example. The body contains text that appears when the application is set to Page Mode: the text identifies the example for the user and provides a link to the stones and chips image.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;body</span> <span class="na">style=</span><span class="s">"background-color:rgba(255,255,255,0.7)"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;div&gt;</span>  
<span class="nt">&lt;h2&gt;</span>Vuforia image tracking example<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>This example illustrates the use of Vuforia for image tracking. It is designed to work with the standard <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://developer.vuforia.com/sites/default/files/sample-apps/targets/imagetargets_targets.pdf"</span><span class="nt">&gt;</span> "stones and chips" Vuforia image<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;/P&gt;</span> <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span></code></pre></figure>

<h2 id="code-file-appjs">Code file (app.js)</h2>
<p>We start with the standard setup. We are using the immersive context (the camera built into the device). We use webgl to render the scene, including the 3D graphic object that we will present.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">.</span><span class="nx">createArgonOptions</span><span class="p">(</span> <span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span> <span class="p">);</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="p">{</span> <span class="na">klass</span><span class="p">:</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">three</span> <span class="o">=</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Bootstrap</span><span class="p">(</span> <span class="nx">options</span> <span class="p">);</span></code></pre></figure>

<p>We add light to our scene, because we will have a 3D object that needs to be lighted. These are three.js objects and methods, which you can find documented at <a href="http://threejs.org/docs/">http://threejs.org/docs/</a>:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">light</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">DirectionalLight</span><span class="p">(</span> <span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span> <span class="nx">light</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span> <span class="p">).</span><span class="nx">normalize</span><span class="p">();</span>
<span class="nx">three</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">light</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">pointLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PointLight</span><span class="p">(</span> <span class="mh">0xffffff</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">1000</span> <span class="p">)</span> <span class="nx">three</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">pointLight</span><span class="p">);</span></code></pre></figure>

<p>Tell <em>argon.js</em> that we require Vuforia for image tracking:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="nx">Argon</span><span class="p">.</span><span class="nx">immersiveContext</span><span class="p">.</span><span class="nx">setRequiredCapabilities</span><span class="p">(</span><span class="s1">'Vuforia'</span><span class="p">)</span></code></pre></figure>

<h2 id="the-license-key">The license key</h2>

<p>Then we initialize Vuforia with a license key. If the developer is using his or her own database, then the encrypted licenseKey would go here (see the end of this tutorial for how to do this). We put null and default to the Vuforia chips and stones image.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="nx">Argon</span><span class="p">.</span><span class="nx">Vuforia</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
    <span class="na">licenseKey</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="na">startCamera</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">api</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// load, activate, and use our dataSet</span>
    <span class="nx">api</span><span class="p">.</span><span class="nx">loadDataSetFromURL</span><span class="p">(</span><span class="s1">'dataset/StonesAndChips.xml'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">dataSet</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dataSet</span><span class="p">.</span><span class="nx">activate</span><span class="p">()</span>
      <span class="nx">setupStonesContent</span><span class="p">(</span><span class="nx">dataSet</span><span class="p">.</span><span class="nx">trackables</span><span class="p">.</span><span class="nx">stones</span><span class="p">)</span>
      <span class="nx">setupChipsContent</span><span class="p">(</span><span class="nx">dataSet</span><span class="p">.</span><span class="nx">trackables</span><span class="p">.</span><span class="nx">chips</span><span class="p">)</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">api</span><span class="p">.</span><span class="nx">startObjectTracker</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">api</span><span class="p">.</span><span class="nx">hintMaxSimultaneousImageTargets</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
  <span class="p">})</span></code></pre></figure>

<h2 id="setting-up-the-trackables">Setting up the trackables</h2>

<p>This function sets up the content that will appear over the stones images. In this case we use <em>three.js</em> methods to construct and texture the box. This function shows the box when the stones image is recognized by Argon and removes the box when the image is lost (i.e. if the user moves the phone so that the camera can no longer see the image). When the box is first recognized, it spins 10 times, then stops.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">function</span> <span class="nx">setupStonesContent</span><span class="p">(</span> <span class="nx">stonesEntity</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// create an Object3D from the stones entity</span>
    <span class="kd">var</span> <span class="nx">stones</span> <span class="o">=</span> <span class="nx">three</span><span class="p">.</span><span class="nx">argon</span><span class="p">.</span><span class="nx">objectFromEntity</span><span class="p">(</span><span class="nx">stonesEntity</span><span class="p">)</span>
    <span class="c1">// create a box</span>
    <span class="kd">var</span> <span class="nx">box</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span><span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">BoxGeometry</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshNormalMaterial</span><span class="p">())</span>
    <span class="nx">box</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="kd">var</span> <span class="nx">boxSpin</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">// add and spin the box when the stones trackable is found</span>
    <span class="nx">stones</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'argon:found'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">stones</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">box</span><span class="p">)</span>
      <span class="nx">boxSpin</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="p">})</span>
    <span class="c1">// remove the box when the stones trackable is lost</span>
    <span class="nx">stones</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'argon:lost'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">stones</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">box</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="c1">// animate the box</span>
    <span class="nx">three</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">box</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">boxSpin</span> <span class="o">*</span> <span class="nx">three</span><span class="p">.</span><span class="nx">Time</span><span class="p">.</span><span class="nx">delta</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">boxSpin</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">boxSpin</span> <span class="o">-=</span> <span class="mi">10</span> <span class="o">*</span> <span class="nx">three</span><span class="p">.</span><span class="nx">Time</span><span class="p">.</span><span class="nx">delta</span>
      <span class="k">else</span> <span class="nx">boxSpin</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">})</span>
  <span class="p">}</span></code></pre></figure>

<p>This function sets up the content to appear over the chips image. In this case we load a prebuilt model of a lizard. The function shows the lizard when the chips image is recognized by <em>argon.js</em> and removes it when the image is lost.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">function</span> <span class="nx">setupChipsContent</span><span class="p">(</span> <span class="nx">chipsEntity</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// create an Object3D from the chips entity</span>
    <span class="kd">var</span> <span class="nx">chips</span> <span class="o">=</span> <span class="nx">three</span><span class="p">.</span><span class="nx">argon</span><span class="p">.</span><span class="nx">objectFromEntity</span><span class="p">(</span><span class="nx">chipsEntity</span><span class="p">)</span>
    <span class="c1">// add the model when the chips trackable is found</span>
    <span class="nx">chips</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'argon:found'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">getModel</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">chips</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">})</span>
    <span class="c1">// remove the model when the chips trackable is lost</span>
    <span class="nx">chips</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'argon:lost'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">getModel</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">chips</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span></code></pre></figure>

<p>This is the function that loads the lizard model, called by the setupChips function above.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">var</span> <span class="nx">modelPromise</span> <span class="o">=</span> <span class="nx">getModel</span><span class="p">()</span>
  <span class="kd">function</span> <span class="nx">getModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">modelPromise</span> <span class="o">=</span> <span class="nx">modelPromise</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// load the model</span>
      <span class="kd">var</span> <span class="nx">loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">JSONLoader</span><span class="p">()</span>
      <span class="nx">loader</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span> <span class="s1">'monster.js'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">geometry</span><span class="p">,</span> <span class="nx">materials</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">materials</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">morphTargets</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="kd">var</span> <span class="nx">faceMaterial</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshFaceMaterial</span><span class="p">(</span> <span class="nx">materials</span> <span class="p">)</span>
        <span class="kd">var</span> <span class="nx">morphMesh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MorphAnimMesh</span><span class="p">(</span> <span class="nx">geometry</span><span class="p">,</span> <span class="nx">faceMaterial</span> <span class="p">)</span>
        <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">matrixAutoUpdate</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">updateMatrix</span><span class="p">()</span>
        <span class="c1">// animate the model</span>
        <span class="nx">three</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">morphMesh</span><span class="p">.</span><span class="nx">updateAnimation</span><span class="p">(</span> <span class="mi">1000</span> <span class="o">*</span> <span class="nx">three</span><span class="p">.</span><span class="nx">Time</span><span class="p">.</span><span class="nx">delta</span> <span class="p">)</span>
        <span class="p">})</span>
        <span class="nx">resolve</span><span class="p">(</span><span class="nx">morphMesh</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span></code></pre></figure>

<h2 id="testing-the-application">Testing the application</h2>

<p>To test the completed application, you need to print out the stones and chips images or bring them up on a computer screen. Then launch the application on your phone and point it at the images.</p>

<h2 id="creating-an-encrypted-license-key-file">Creating an encrypted license key file</h2>

<p>To use your own Vuforia targets, you must create your own Vuforia license key on the Vuforia website, and use it when initializing Vuforia in argon.js.</p>

<p>Since any file you put on a web server could potentially be copied by anyone with access to that server, argon.js requires that you store the license key in an encrypted JSON file.  The license should be in the <em>key</em> field in the JSON, as a string.</p>

<p>In addition, since you don’t want anyone else to simply copy and your Vuforia tracking datasets or your encrypted license, argon.js also requires you to store a set of url pattern’s in the encrypted file, representing valid urls for Vuforia datasets that can be used with this key. The url patterns should be in the <em>urls</em> field in the JSON, as an array of regular expression strings.</p>

<p>The format of the encrypted file, with some examples of possible url patterns for the Vuforia dataset files, is:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
   </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"---- YOUR VUFORIA LICENSE KEY HERE ---"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"^http://www.yourfullyqualifieddomain.com/.*"</span><span class="p">,</span><span class="w">
	  </span><span class="s2">"^http[s]?://[A-Za-z0-9-.]*.yourdomain.com/.*"</span><span class="p">,</span><span class="w">
	  </span><span class="s2">"^http[s]?://[A-Za-z0-9-.]*.yourdomain.com/directory/to/limit/url/.*"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>To encrypt the file, you should encrypt it for the user <em>secure@argonjs.io</em>, using PGP.  There are both commercial and free PGP implementations that can be used;  we use <a href="https://gpgtools.org">GPG Tools</a> on MacOSX.  With GPGTools installed, fetch the public key for <em>secure@argonjs.io</em> using the “GPG Keychain” application, and then encrypt a file containing your JSON using <em>secure@argonjs.io</em> as the receipient.  Do not sign or encrypt the file with a password.</p>

<p>The easiest way to store the encrypted file is in a script element as type “text/plain” in your HTML file, as follows:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"license"</span> <span class="na">type=</span><span class="s">"text/plain"</span><span class="nt">&gt;</span><span class="o">-----</span><span class="nx">BEGIN</span> <span class="nx">PGP</span> <span class="nx">MESSAGE</span><span class="o">-----</span>
<span class="nx">Comment</span><span class="err">:</span> <span class="nx">GPGTools</span> <span class="o">-</span> <span class="nx">https</span><span class="err">:</span><span class="c1">//gpgtools.org</span>

<span class="nx">hQIMA47tt</span><span class="o">+</span><span class="nx">RhMWHyAQ</span><span class="o">/</span><span class="mi">8</span><span class="nx">Dq0iFIgfZcTpihTvSFcQXGd3ioDdTv</span><span class="o">+</span><span class="nx">pwhUvmwq8kYhg</span>
<span class="nx">TwsQzC4U8zV8P62gNFkfFTRM78o19QoxOM1Jpsy6lqwkFNv7a31BFy</span><span class="o">/</span><span class="nx">tSa2s9GYw</span>
<span class="nx">D</span><span class="o">+</span><span class="nx">NbNX5vTjYrxILa7BEha4sS38P6J4</span><span class="o">/</span><span class="nx">RQ0neIyOa01y7qjs</span><span class="o">/</span><span class="mi">6</span><span class="nx">il49DTZPPc5SIMA</span>
<span class="sr">/V5VkRJQPINR5fUFleInxgwWOjmMSl+dGGEsnxI8wbL2pbdzSs3sqwKigybLjTI</span><span class="err">g
</span><span class="nx">XkrkF49FEjuyD7u5Jw2OIPkdYiSGeYJB5HArWzLgZen9EcvZUqOIYYzCbjAULZFF</span>
<span class="mi">2</span><span class="nx">rAXR2wvkmizEp8jPuVe43xrnmw3LGE94IkDyktQ6IFD5PwM2j88gH0th6</span><span class="o">+</span><span class="nx">OD9UR</span>
<span class="nx">klR5BzIQmdgksC1h63</span><span class="o">+</span><span class="nx">D</span><span class="o">+</span><span class="nx">LQNoLDtVrOCQ1x69uQSkBLurDVJSW</span><span class="o">/</span><span class="nx">RMPIhyMk6lGtF</span>
<span class="nx">cFBhkVXbY9jZ9rFXEAYCdvMUkaiDcxI1eZJxI</span><span class="o">/</span><span class="nx">IGpOawAuXrNfpRl1iOlB9</span><span class="o">/</span><span class="nx">Egfc</span>
<span class="nx">HaMexrnQXwsioUjZKDlwxtZKRS</span><span class="c1">//BvUFJuhNV9kYk3ToZ7DBGKRJem1D1MhJ26C4</span>
<span class="nx">MWHgOqJ4hMtW7BkOVD7fwKSms</span><span class="o">+</span><span class="nx">lgYgoHhhWypvRzUGXelo0pSGJWKauo8</span><span class="o">/</span><span class="nx">tokNFv</span>
<span class="mi">3</span><span class="nx">yDy</span><span class="o">+</span><span class="nx">lzzwOi</span><span class="o">/</span><span class="nx">tUglFID</span><span class="o">/</span><span class="nx">xa</span><span class="o">/</span><span class="nx">HT7J3Its1PStMuYZah7Z7K0sqZ3s9C</span><span class="o">/</span><span class="nx">bK7Pdn8rLS</span>
<span class="nx">wBoBJCdUGJqjLA63tThhoLM6zRAR8A</span><span class="o">+</span><span class="mi">4</span><span class="nx">QCrQL8yNf5RkWztmGo</span><span class="o">+</span><span class="mi">7</span><span class="nx">c</span><span class="o">+</span><span class="nx">y6C0I01dAU</span>
<span class="nx">pYL95kQelEG9lb3UOsby0uACZAQ1KzZ9hEhglWY4JoGlrYayctMO5gYAUSHYoaGv</span>
<span class="nx">Rt7am1wGKCH</span><span class="o">/</span><span class="nx">owsD2LRf3aL4DkN</span><span class="o">+</span><span class="nx">Z5HUnHWYPuBLyFuTyMVF</span><span class="o">/</span><span class="nx">rzsTQrut6BNR41V</span>
<span class="mi">2</span><span class="nx">JqVh6kkFY7AEBC</span><span class="o">+</span><span class="nx">yLhSDPoCxsC4Sem2jnqUf1iTsq7fYDFfLcRo3IwjK8qBiZrY</span>
<span class="nx">udIn90</span><span class="o">/</span><span class="nx">G9Zrk9Z026rC4</span><span class="o">+</span><span class="mi">4</span><span class="nx">QA1MfLKxDm72cbaA</span><span class="o">==</span>
<span class="o">=</span><span class="nx">jWhj</span>
<span class="o">-----</span><span class="nx">END</span> <span class="nx">PGP</span> <span class="nx">MESSAGE</span><span class="o">-----</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Do not put any extra space at the beginning or end of the script element contents, and do not reformat the text.</p>

<p>Now, to use this key in your code, get the contents of the script element and pass it to the <em>Argon.Vuforia.initialize</em> method as the <em>encryptedLicenseData</em> parameter (instead of passing <em>null</em> to <em>licenseKey</em> above).</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">var</span> <span class="nx">encryptedData</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"license"</span><span class="p">).</span><span class="nx">text</span><span class="p">;</span>

  <span class="c1">// initialize Vuforia with our licencse key</span>
  <span class="nx">Argon</span><span class="p">.</span><span class="nx">Vuforia</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
     <span class="na">encryptedLicenseData</span><span class="p">:</span> <span class="nx">encryptedData</span><span class="p">,</span>
     <span class="na">startCamera</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span></code></pre></figure>

<p>Once Vuforia is initialized using your encrypted license file, you can use any Vuforia dataset that is loaded from a URL matching one of the patterns in the JSON file.</p>

<p>Note: if a relative URL is passed to <em>api.loadDataSetFromURL</em>, we construct the full address from the base URL of the URL the user used to load your web application.  This may be problematic if the user (or your web server) does URL redirection – this is a known problem that we are working on fixing.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/tutorials/WelcomePage.html">
            Welcome
            <small>01 Mar 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/tutorials/tutorial7">
            Tutorial 7 - Building and Debugging
            <small>01 Mar 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/tutorials/tutorial5">
            Tutorial 5 - Geolocation
            <small>01 Mar 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

  </body>
</html>
